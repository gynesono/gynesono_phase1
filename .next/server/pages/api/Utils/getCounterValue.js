"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/Utils/getCounterValue";
exports.ids = ["pages/api/Utils/getCounterValue"];
exports.modules = {

/***/ "aws-sdk":
/*!**************************!*\
  !*** external "aws-sdk" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("aws-sdk");

/***/ }),

/***/ "(api)/./src/pages/api/Utils/getCounterValue.js":
/*!************************************************!*\
  !*** ./src/pages/api/Utils/getCounterValue.js ***!
  \************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/**\r\n * Comments\r\n*/ function handler(req, res) {\n    var AWS = __webpack_require__(/*! aws-sdk */ \"aws-sdk\");\n    AWS.config.update({\n        region: 'us-west-1',\n        accessKeyId: 'accessKeyId',\n        secretAccessKey: 'secretAccessKey',\n        endpoint: new AWS.Endpoint('http://localhost:8000')\n    });\n    var docClient = new AWS.DynamoDB.DocumentClient();\n    var counterName = \"\"; //req.counterName;\n    var customerId; //req.customerID;\n    //This api can be called by other API's by posting the data\n    // counterName = \"Appointments\"\n    // customerId = 3;\n    if (req.method == 'POST') {\n        counterName = req.body.counterName;\n        customerId = req.body.customerID;\n    }\n    var tableName = \"counter\";\n    var returnMessage;\n    var counterValue;\n    var params = {\n        TableName: tableName,\n        KeyConditionExpression: \"#cn = :cn and customer_id = :ci\",\n        ExpressionAttributeNames: {\n            \"#cn\": \"counter_name\"\n        },\n        ExpressionAttributeValues: {\n            \":ci\": customerId,\n            \":cn\": counterName\n        }\n    };\n    docClient.query(params, function(err1, data1) {\n        if (err1) {\n            console.error(\"Unable to find appointments. Error JSON:\", JSON.stringify(err1, null, 2));\n        } else {\n            console.log(\"GetItem succeeded:\", JSON.stringify(data1, null, 2));\n            //Sending the JSon object in the Response object\n            data1.Items.forEach(function(item) {\n                //name: 'John Doe'\n                counterValue = parseInt(item.counter_value);\n                counterValue = counterValue + 1;\n                console.log(\"The current Counter Value: \", counterValue);\n                var params1 = {\n                    TableName: tableName,\n                    Key: {\n                        \"counter_name\": counterName,\n                        \"customer_id\": customerId\n                    },\n                    UpdateExpression: \"set counter_value = :cv\",\n                    ExpressionAttributeValues: {\n                        \":cv\": counterValue\n                    },\n                    ReturnValues: \"UPDATED_NEW\"\n                };\n                returnMessage = \"Updating the counter value...\";\n                docClient.update(params1, function(err, data) {\n                    if (err) {\n                        console.error(\"Unable to update item. Error JSON:\", JSON.stringify(err, null, 2));\n                    } else {\n                        console.log(\"UpdateItem succeeded:\", JSON.stringify(data, null, 2));\n                    }\n                });\n            });\n            res.json(JSON.stringify(data1, null, 2));\n        ////////        \n        }\n    //returnMessage = returnMessage + JSON.stringify(data, null, 2);\n    //console.log(returnMessage);\n    });\n    res.status(200);\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9zcmMvcGFnZXMvYXBpL1V0aWxzL2dldENvdW50ZXJWYWx1ZS5qcy5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQUEsRUFFRTtJQUVFLEdBQUcsQ0FBQ0csR0FBRztHQUVJRyxHQUFNLENBQUMsQ0FBQztRQUNmQyxNQUFNLG1CQUFhO1FBQ25CQyxXQUFXLEVBQUUsQ0FBYTtRQUMxQkMsZUFBZSxFQUFFLENBQWlCO1FBQ2xDQyxRQUFRLEVBQUUsR0FBRyxDQUFDUCxHQUFHLENBQUNRLFFBQVEsQ0FBQztJQUMvQixDQUFDO0lBRUQsR0FBRyxDQUFDQyxTQUFTLEdBQUcsR0FBRyxDQUFDVCxHQUFHLENBQUNVLFFBQVEsQ0FBQ0MsY0FBYztJQUUvQyxHQUFHO0lBQ0gsR0FBRyxDQUFDRSxVQUFVLENBQUcsQ0FBaUI7SUFFbEMsRUFBMkQ7SUFFM0QsRUFBK0I7SUFDL0IsRUFBa0I7SUFDbEIsRUFBRSxFQUFFZixHQUFHLENBQUNnQixNQUFNLElBQUksQ0FBTSxPQUFFLENBQUM7UUFDdkJGLFdBQVcsR0FBR2Q7UUFDZGUsVUFBVSxHQUFHZixHQUFHLENBQUNpQixJQUFJLENBQUNDO0lBRTFCLENBQUM7SUFFRCxHQUFHLENBQUNDLFNBQVMsR0FBRyxDQUFTO0lBQ3pCO0lBQ0EsR0FBRyxDQUFDRSxZQUFZO0lBRWhCLEdBQUcsQ0FBQ0MsTUFBTSxHQUFHLENBQUM7UUFDVkMsU0FBUyxFQUFFSjtRQUNYSztRQUNBQztZQUNJLENBQUssTUFBRSxDQUFjO1FBQ3pCLENBQUM7UUFDREMseUJBQXlCOztZQUVyQixDQUFLLE1BQUdaLFdBQVc7UUFDdEIsQ0FBQztJQUVGLENBQUM7SUFFTEg7O1lBRVltQixPQUFPLENBQUNDLEtBQUssQ0FBQyxDQUEwQztRQUM1RCxDQUFDLE1BQ0QsQ0FBQztZQUNHRCxPQUFPLENBQUNJLEdBQUcsQ0FBQyxDQUFvQixxQkFBRUYsSUFBSSxDQUFDQyxTQUFTLENBQUNKLEtBQUksRUFBRSxJQUFJLEVBQUUsQ0FBQztZQUM5RCxFQUFnRDtZQUNoREEsS0FBSSxDQUFDTSxLQUFLLENBQUNDLE9BQU8sQ0FBQyxRQUFRLENBQUNDLElBQUksRUFBRSxDQUFDO2dCQUMvQixFQUFrQjtnQkFDbEJoQixZQUFZLEdBQUdpQixRQUFRLENBQUNELElBQUksQ0FBQ0U7Z0JBQzdCbEIsWUFBWSxHQUFHQTtnQkFDZlMsT0FBTyxDQUFDSSxHQUFHLENBQUMsQ0FBNkIsOEJBQUNiO2dCQUMxQyxHQUFHLENBQUNtQixPQUFPLEdBQUcsQ0FBQztvQkFDWGpCLFNBQVMsRUFBQ0osU0FBUztvQkFDbkJzQixHQUFHLEVBQUMsQ0FBQzt3QkFDRCxDQUFjLGVBQUUzQjt3QkFDaEIsQ0FBYTtvQkFDakIsQ0FBQztvQkFDRDRCLGdCQUFnQixFQUFFLENBQXlCO29CQUMzQ2hCO3dCQUNJLENBQUssTUFBRUwsWUFBWTtvQkFDbkIsQ0FBQztvQkFDTHNCLFlBQVksRUFBQyxDQUFhO2dCQUM5QixDQUFDO2dCQUNEdkIsYUFBYSxHQUFHLENBQStCO2dCQUMvQ1Q7b0JBQ0ksRUFBRSxFQUFFaUIsR0FBRyxFQUFFLENBQUM7d0JBQ05FLE9BQU8sQ0FBQ0MsS0FBSyxDQUFDLENBQW9DO29CQUN0RCxDQUFDLE1BQU0sQ0FBQzt3QkFDSkQsT0FBTyxDQUFDSSxHQUFHLENBQUMsQ0FBdUIsd0JBQUVGLElBQUksQ0FBQ0MsU0FBUyxDQUFDSixJQUFJLEVBQUUsSUFBSSxFQUFFLENBQUM7b0JBQ3JFLENBQUM7Z0JBQ0wsQ0FBQztZQUNMLENBQUM7WUFHRDVCLEdBQUcsQ0FBQzJDO1FBSUosRUFBZ0I7UUFDcEIsQ0FBQztJQUNELEVBQWdFO0lBRWhFLEVBQTZCO0lBQ2pDLENBQUM7SUFFTDNDLEdBQUcsQ0FBQzRDLE1BQU0sQ0FBQyxHQUFHO0FBR2xCLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9neW5lc29ub3BoYXNlMi8uL3NyYy9wYWdlcy9hcGkvVXRpbHMvZ2V0Q291bnRlclZhbHVlLmpzPzMwMTMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIENvbW1lbnRzXHJcbiovXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcclxuICAgIHZhciBBV1MgPSByZXF1aXJlKFwiYXdzLXNka1wiKTtcclxuXHJcbiAgICBBV1MuY29uZmlnLnVwZGF0ZSh7XHJcbiAgICAgICAgcmVnaW9uOiAndXMtd2VzdC0xJyxcclxuICAgICAgICBhY2Nlc3NLZXlJZDogJ2FjY2Vzc0tleUlkJyxcclxuICAgICAgICBzZWNyZXRBY2Nlc3NLZXk6ICdzZWNyZXRBY2Nlc3NLZXknLFxyXG4gICAgICAgIGVuZHBvaW50OiBuZXcgQVdTLkVuZHBvaW50KCdodHRwOi8vbG9jYWxob3N0OjgwMDAnKSxcclxuICAgIH0pO1xyXG5cclxuICAgIHZhciBkb2NDbGllbnQgPSBuZXcgQVdTLkR5bmFtb0RCLkRvY3VtZW50Q2xpZW50KCk7XHJcbiAgIFxyXG4gICAgdmFyIGNvdW50ZXJOYW1lID0gIFwiXCI7Ly9yZXEuY291bnRlck5hbWU7XHJcbiAgICB2YXIgY3VzdG9tZXJJZCA7IC8vcmVxLmN1c3RvbWVySUQ7XHJcblxyXG4gICAgLy9UaGlzIGFwaSBjYW4gYmUgY2FsbGVkIGJ5IG90aGVyIEFQSSdzIGJ5IHBvc3RpbmcgdGhlIGRhdGFcclxuXHJcbiAgICAvLyBjb3VudGVyTmFtZSA9IFwiQXBwb2ludG1lbnRzXCJcclxuICAgIC8vIGN1c3RvbWVySWQgPSAzO1xyXG4gICAgaWYgKHJlcS5tZXRob2QgPT0gJ1BPU1QnKSB7XHJcbiAgICAgICAgY291bnRlck5hbWUgPSByZXEuYm9keS5jb3VudGVyTmFtZTtcclxuICAgICAgICBjdXN0b21lcklkID0gcmVxLmJvZHkuY3VzdG9tZXJJRDtcclxuICAgICAgIFxyXG4gICAgfVxyXG4gICAgXHJcbiAgICB2YXIgdGFibGVOYW1lID0gXCJjb3VudGVyXCI7XHJcbiAgICB2YXIgcmV0dXJuTWVzc2FnZTtcclxuICAgIHZhciBjb3VudGVyVmFsdWU7XHJcblxyXG4gICAgdmFyIHBhcmFtcyA9IHtcclxuICAgICAgICBUYWJsZU5hbWU6IHRhYmxlTmFtZSxcclxuICAgICAgICBLZXlDb25kaXRpb25FeHByZXNzaW9uOiBcIiNjbiA9IDpjbiBhbmQgY3VzdG9tZXJfaWQgPSA6Y2lcIixcclxuICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlTmFtZXM6e1xyXG4gICAgICAgICAgICBcIiNjblwiOiBcImNvdW50ZXJfbmFtZVwiXHJcbiAgICAgICAgfSxcclxuICAgICAgICBFeHByZXNzaW9uQXR0cmlidXRlVmFsdWVzOiB7XHJcbiAgICAgICAgICAgIFwiOmNpXCI6IGN1c3RvbWVySWQsXHJcbiAgICAgICAgICAgIFwiOmNuXCIgOiBjb3VudGVyTmFtZVxyXG4gICAgICAgICB9XHJcbiAgICAgXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBkb2NDbGllbnQucXVlcnkocGFyYW1zLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcclxuICAgICAgICBpZiAoZXJyKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFwiVW5hYmxlIHRvIGZpbmQgYXBwb2ludG1lbnRzLiBFcnJvciBKU09OOlwiLCBKU09OLnN0cmluZ2lmeShlcnIsIG51bGwsIDIpKTtcclxuICAgICAgICAgICAgfSBlbHNlIFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIkdldEl0ZW0gc3VjY2VlZGVkOlwiLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgICAgICAgICAgICAvL1NlbmRpbmcgdGhlIEpTb24gb2JqZWN0IGluIHRoZSBSZXNwb25zZSBvYmplY3RcclxuICAgICAgICAgICAgICAgIGRhdGEuSXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9uYW1lOiAnSm9obiBEb2UnXHJcbiAgICAgICAgICAgICAgICAgICAgY291bnRlclZhbHVlID0gcGFyc2VJbnQoaXRlbS5jb3VudGVyX3ZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb3VudGVyVmFsdWUgPSBjb3VudGVyVmFsdWUrMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlRoZSBjdXJyZW50IENvdW50ZXIgVmFsdWU6IFwiLGNvdW50ZXJWYWx1ZSlcclxuICAgICAgICAgICAgICAgICAgICB2YXIgcGFyYW1zMSA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgVGFibGVOYW1lOnRhYmxlTmFtZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgS2V5OntcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFwiY291bnRlcl9uYW1lXCI6IGNvdW50ZXJOYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXCJjdXN0b21lcl9pZFwiOiBjdXN0b21lcklkXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFVwZGF0ZUV4cHJlc3Npb246IFwic2V0IGNvdW50ZXJfdmFsdWUgPSA6Y3ZcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgRXhwcmVzc2lvbkF0dHJpYnV0ZVZhbHVlczp7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBcIjpjdlwiOiBjb3VudGVyVmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFJldHVyblZhbHVlczpcIlVQREFURURfTkVXXCJcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybk1lc3NhZ2UgPSBcIlVwZGF0aW5nIHRoZSBjb3VudGVyIHZhbHVlLi4uXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgZG9jQ2xpZW50LnVwZGF0ZShwYXJhbXMxLCBmdW5jdGlvbihlcnIsIGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVycikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihcIlVuYWJsZSB0byB1cGRhdGUgaXRlbS4gRXJyb3IgSlNPTjpcIiwgSlNPTi5zdHJpbmdpZnkoZXJyLCBudWxsLCAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcIlVwZGF0ZUl0ZW0gc3VjY2VlZGVkOlwiLCBKU09OLnN0cmluZ2lmeShkYXRhLCBudWxsLCAyKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgcmVzLmpzb24oSlNPTi5zdHJpbmdpZnkoZGF0YSwgbnVsbCwgMikpOyAgIFxyXG4gICAgICAgICAgICAgICAgXHJcblxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLy8vLy8vLyAgICAgICAgXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy9yZXR1cm5NZXNzYWdlID0gcmV0dXJuTWVzc2FnZSArIEpTT04uc3RyaW5naWZ5KGRhdGEsIG51bGwsIDIpO1xyXG5cclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhyZXR1cm5NZXNzYWdlKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICByZXMuc3RhdHVzKDIwMCk7XHJcbiAgIFxyXG4gICAgXHJcbn0iXSwibmFtZXMiOlsiaGFuZGxlciIsInJlcSIsInJlcyIsIkFXUyIsInJlcXVpcmUiLCJjb25maWciLCJ1cGRhdGUiLCJyZWdpb24iLCJhY2Nlc3NLZXlJZCIsInNlY3JldEFjY2Vzc0tleSIsImVuZHBvaW50IiwiRW5kcG9pbnQiLCJkb2NDbGllbnQiLCJEeW5hbW9EQiIsIkRvY3VtZW50Q2xpZW50IiwiY291bnRlck5hbWUiLCJjdXN0b21lcklkIiwibWV0aG9kIiwiYm9keSIsImN1c3RvbWVySUQiLCJ0YWJsZU5hbWUiLCJyZXR1cm5NZXNzYWdlIiwiY291bnRlclZhbHVlIiwicGFyYW1zIiwiVGFibGVOYW1lIiwiS2V5Q29uZGl0aW9uRXhwcmVzc2lvbiIsIkV4cHJlc3Npb25BdHRyaWJ1dGVOYW1lcyIsIkV4cHJlc3Npb25BdHRyaWJ1dGVWYWx1ZXMiLCJxdWVyeSIsImVyciIsImRhdGEiLCJjb25zb2xlIiwiZXJyb3IiLCJKU09OIiwic3RyaW5naWZ5IiwibG9nIiwiSXRlbXMiLCJmb3JFYWNoIiwiaXRlbSIsInBhcnNlSW50IiwiY291bnRlcl92YWx1ZSIsInBhcmFtczEiLCJLZXkiLCJVcGRhdGVFeHByZXNzaW9uIiwiUmV0dXJuVmFsdWVzIiwianNvbiIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./src/pages/api/Utils/getCounterValue.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./src/pages/api/Utils/getCounterValue.js"));
module.exports = __webpack_exports__;

})();