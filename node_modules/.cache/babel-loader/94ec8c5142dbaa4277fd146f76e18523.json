{"ast":null,"code":"var _jsxFileName = \"D:\\\\Gynesono\\\\Workspace\\\\gynophase3\\\\src\\\\pages\\\\AppointmentSearch.js\";\nimport React, { Component } from 'react';\nimport { Link } from 'react-router-dom';\nimport Leftmenu from './Navigation/Leftmenu';\nimport Header from './Navigation/Header';\nimport CustomerRegistation from './CustomerRegistation';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass AppointmentSearch extends Component {\n  constructor() {\n    super(...arguments);\n    this.state = {\n      response: '',\n      post: '',\n      responseToPost: '',\n      date: '',\n      IsAppointmentEdit: true\n    };\n\n    this.handleOnload = async customerID => {\n      const requestHeader = {\n        \"content-Type\": \"application/json\",\n        accessIDKey: this.state.Token\n      };\n      const response = await fetch('http://localhost:3000/api/Appointments/getAppointmentsforDash', {\n        method: 'POST',\n        headers: requestHeader,\n        body: JSON.stringify({\n          customerID: customerID\n        })\n      });\n      const body = await response.json();\n      this.setState({\n        responseToPost: body.Items\n      });\n    };\n\n    this.handleDate = str => {\n      const m = str.split(\"-\");\n      let str_date = m[2] + \"/\" + m[1] + \"/\" + m[0];\n      this.setState({\n        date: str_date\n      });\n    };\n\n    this.CancelStatus = async key => {\n      const requestHeader = {\n        \"content-Type\": \"application/json\",\n        accessIDKey: this.state.Token\n      };\n      window.location.reload(true);\n      const response = await fetch('http://localhost:3000/api/Appointments/setAppointmentsStatus', {\n        method: 'POST',\n        headers: requestHeader,\n        body: JSON.stringify({\n          appointmentID: key,\n          customerID: this.state.customerID,\n          appointmentStatus: \"Cancelled\"\n        })\n      });\n    };\n\n    this.handleSubmit = async e => {\n      e.preventDefault();\n      const requestHeader = {\n        \"content-Type\": \"application/json\",\n        accessIDKey: this.state.Token\n      };\n      const response = await fetch('http://localhost:3000/api/Appointments/getAllAppointmentsByDate', {\n        method: 'POST',\n        headers: requestHeader,\n        body: JSON.stringify({\n          appointmentDate: this.state.date,\n          customerID: this.state.customerID\n        })\n      });\n      const body = await response.json();\n      this.setState({\n        responseToPost: body.Items\n      });\n    };\n\n    this.handleName = items => {\n      this.setState({\n        FirstName: items.patient_details.patient_first_name\n      });\n      this.setState({\n        LastName: items.patient_details.patient_last_name\n      });\n      this.setState({\n        Contact: items.patient_details.patient_contact_no\n      });\n      this.setState({\n        IsAppointmentEdit: false\n      });\n      console.log(items);\n    };\n  }\n\n  componentDidMount() {\n    const tokenString = sessionStorage.getItem('token');\n    const userToken = JSON.parse(tokenString);\n    const customerIDString = sessionStorage.getItem('customerID');\n    const customerID = parseInt(customerIDString);\n    this.setState({\n      Token: userToken\n    });\n    this.setState({\n      customerID: customerID\n    });\n    this.handleOnload(customerID);\n  }\n\n  render() {\n    if (!this.state.IsAppointmentEdit) {\n      return /*#__PURE__*/_jsxDEV(CustomerRegistation, {\n        ptFirstName: this.state.FirstName,\n        ptLastName: this.state.LastName,\n        mn: this.state.Contact\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"main-wrapper\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"page-wrapper\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"content\",\n            children: [/*#__PURE__*/_jsxDEV(Header, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(Leftmenu, {}, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-4 col-3\",\n                children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                  className: \"page-title\",\n                  children: \"Appointments\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 115,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 114,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-sm-8 col-9 text-right m-b-20\",\n                children: /*#__PURE__*/_jsxDEV(Link, {\n                  to: \"/appointmentAdd\",\n                  className: \"btn btn btn-primary float-right\",\n                  children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                    className: \"fa fa-plus\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 90\n                  }, this), \" Add Appointment\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 118,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 117,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 113,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n              onSubmit: this.handleSubmit,\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"row filter-row\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-xl-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"label\", {\n                    className: \"focus-label\",\n                    children: \"Appointment Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 125,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 124,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-xl-2\",\n                  children: /*#__PURE__*/_jsxDEV(\"input\", {\n                    type: \"date\",\n                    className: \"form-control floating\",\n                    value: this.state.aptDate1,\n                    onChange: e => this.handleDate(e.target.value)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 127,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"col-xl-1\",\n                  children: /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"submit\",\n                    className: \"btn btn-success btn-block\",\n                    children: \"Search\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 134,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 132,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n              className: \"table table-border table-striped custom-table datatable mb-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Appointment ID\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 141,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Customer Name\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 142,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Appointment Date\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 143,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Appointment Time\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Contact Number\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 145,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Remark\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 146,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Status\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Register\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 148,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                    className: \"ant-table-cell\",\n                    children: \"Action\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 149,\n                    columnNumber: 18\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 17\n              }, this), this.state.responseToPost.length > 0 && /*#__PURE__*/_jsxDEV(\"tbody\", {\n                children: this.state.responseToPost.map(items => /*#__PURE__*/_jsxDEV(\"tr\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                    children: items.appointment_id\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 162,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: `${items.patient_details.patient_first_name} ${items.patient_details.patient_last_name}`\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: items.appointment_date\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 164,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: items.appointment_time\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 165,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: items.patient_details.patient_contact_no\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 166,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: items.patient_details.patient_appointment_remarks\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-warning\",\n                    children: items.appointment_status\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 168,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    children: /*#__PURE__*/_jsxDEV(\"button\", {\n                      className: \"btn btn btn-primary float-right\",\n                      onClick: () => this.handleName(items),\n                      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                        className: \"fa fa-plus\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 170,\n                        columnNumber: 118\n                      }, this), \" Register Customer\"]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 170,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 169,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                    className: \"text-right\",\n                    children: /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"dropdown dropdown-action\",\n                      children: [/*#__PURE__*/_jsxDEV(\"a\", {\n                        className: \"action-icon dropdown-toggle\",\n                        \"data-toggle\": \"dropdown\",\n                        \"aria-expanded\": \"false\",\n                        children: /*#__PURE__*/_jsxDEV(\"i\", {\n                          className: \"fa fa-ellipsis-v\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 178,\n                          columnNumber: 53\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 177,\n                        columnNumber: 29\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"dropdown-menu dropdown-menu-right\",\n                        children: [/*#__PURE__*/_jsxDEV(Link, {\n                          to: \"/appointmentUpdate/\" + items.appointment_id,\n                          className: \"dropdown-item\",\n                          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-pencil m-r-5\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 180,\n                            columnNumber: 113\n                          }, this), \" Edit\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 180,\n                          columnNumber: 31\n                        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                          className: \"dropdown-item\",\n                          \"data-toggle\": \"modal\",\n                          \"data-target\": \"#delete_patient\",\n                          onClick: () => this.CancelStatus(items.appointment_id),\n                          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                            className: \"fa fa-trash-o m-r-5\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 183,\n                            columnNumber: 119\n                          }, this), \" Cancel\"]\n                        }, void 0, true, {\n                          fileName: _jsxFileName,\n                          lineNumber: 182,\n                          columnNumber: 31\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 179,\n                        columnNumber: 29\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 27\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 25\n                  }, this)]\n                }, items.appointment_id, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 161,\n                  columnNumber: 23\n                }, this))\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 156,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 138,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"sidebar-overlay\",\n          \"data-reff\": \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 9\n      }, this);\n    }\n  }\n\n}\n\nexport default AppointmentSearch;","map":{"version":3,"sources":["D:/Gynesono/Workspace/gynophase3/src/pages/AppointmentSearch.js"],"names":["React","Component","Link","Leftmenu","Header","CustomerRegistation","AppointmentSearch","state","response","post","responseToPost","date","IsAppointmentEdit","handleOnload","customerID","requestHeader","accessIDKey","Token","fetch","method","headers","body","JSON","stringify","json","setState","Items","handleDate","str","m","split","str_date","CancelStatus","key","window","location","reload","appointmentID","appointmentStatus","handleSubmit","e","preventDefault","appointmentDate","handleName","items","FirstName","patient_details","patient_first_name","LastName","patient_last_name","Contact","patient_contact_no","console","log","componentDidMount","tokenString","sessionStorage","getItem","userToken","parse","customerIDString","parseInt","render","aptDate1","target","value","length","map","appointment_id","appointment_date","appointment_time","patient_appointment_remarks","appointment_status"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Leftmenu from './Navigation/Leftmenu';\r\nimport Header from './Navigation/Header';\r\nimport CustomerRegistation from './CustomerRegistation';\r\n\r\nclass AppointmentSearch extends Component {\r\n  state = {\r\n    response: '',\r\n    post: '',\r\n    responseToPost: '',\r\n    date: '',\r\n    IsAppointmentEdit: true,\r\n  };\r\n\r\n  componentDidMount() {\r\n    const tokenString = sessionStorage.getItem('token');\r\n    const userToken = JSON.parse(tokenString);\r\n    const customerIDString = sessionStorage.getItem('customerID');\r\n    const customerID = parseInt(customerIDString);\r\n    this.setState({ Token: userToken });\r\n    this.setState({ customerID: customerID });\r\n    this.handleOnload(customerID);\r\n\r\n  }\r\n  handleOnload = async (customerID) => {\r\n\r\n    const requestHeader = {\r\n      \"content-Type\": \"application/json\",\r\n      accessIDKey: this.state.Token\r\n    };\r\n    const response = await fetch('http://localhost:3000/api/Appointments/getAppointmentsforDash', {\r\n      method: 'POST',\r\n      headers: requestHeader,\r\n      body: JSON.stringify({\r\n        customerID: customerID,\r\n      }),\r\n    });\r\n\r\n    const body = await response.json();\r\n    this.setState({ responseToPost: body.Items });\r\n  }\r\n\r\n\r\n  handleDate = (str) => {\r\n\r\n    const m = str.split(\"-\");\r\n    let str_date = m[2] + \"/\" + m[1] + \"/\" + m[0];\r\n    this.setState({ date: str_date })\r\n\r\n  }\r\n  CancelStatus = async (key) => {\r\n    const requestHeader = {\r\n      \"content-Type\": \"application/json\",\r\n      accessIDKey: this.state.Token\r\n    };\r\n    window.location.reload(true);\r\n\r\n    const response = await fetch('http://localhost:3000/api/Appointments/setAppointmentsStatus', {\r\n      method: 'POST',\r\n      headers: requestHeader,\r\n      body: JSON.stringify({\r\n        appointmentID: key,\r\n        customerID: this.state.customerID,\r\n        appointmentStatus: \"Cancelled\"\r\n      }),\r\n\r\n    });\r\n\r\n  }\r\n\r\n  handleSubmit = async e => {\r\n    e.preventDefault();\r\n    const requestHeader = {\r\n      \"content-Type\": \"application/json\",\r\n      accessIDKey: this.state.Token\r\n    };\r\n    const response = await fetch('http://localhost:3000/api/Appointments/getAllAppointmentsByDate', {\r\n      method: 'POST',\r\n      headers: requestHeader,\r\n      body: JSON.stringify({\r\n        appointmentDate: this.state.date,\r\n        customerID: this.state.customerID,\r\n\r\n      }),\r\n    });\r\n\r\n    const body = await response.json();\r\n    this.setState({ responseToPost: body.Items });\r\n  };\r\n\r\n  handleName = (items) => {\r\n    this.setState({ FirstName: items.patient_details.patient_first_name });\r\n    this.setState({ LastName: items.patient_details.patient_last_name });\r\n    this.setState({ Contact: items.patient_details.patient_contact_no });\r\n    this.setState({ IsAppointmentEdit: false });\r\n    console.log(items)\r\n  }\r\n\r\n  render() {\r\n    if (!this.state.IsAppointmentEdit) {\r\n      return (\r\n        <CustomerRegistation ptFirstName={this.state.FirstName} ptLastName={this.state.LastName} mn={this.state.Contact} />)\r\n    }\r\n    else {\r\n      return (\r\n\r\n        <div className=\"main-wrapper\">\r\n          <div className=\"page-wrapper\">\r\n            <div className=\"content\">\r\n              <Header />\r\n              <Leftmenu />\r\n              <div className=\"row\">\r\n                <div className=\"col-sm-4 col-3\">\r\n                  <h4 className=\"page-title\">Appointments</h4>\r\n                </div>\r\n                <div className=\"col-sm-8 col-9 text-right m-b-20\">\r\n                  <Link to=\"/appointmentAdd\" className=\"btn btn btn-primary float-right\"><i\r\n                    className=\"fa fa-plus\"></i> Add Appointment</Link>\r\n                </div>\r\n              </div>\r\n              <form onSubmit={this.handleSubmit}>\r\n                <div className=\"row filter-row\">\r\n                  <div className=\"col-xl-2\">\r\n                    <label className=\"focus-label\">Appointment Date</label>\r\n                  </div>\r\n                  <div className=\"col-xl-2\">\r\n                    <input type=\"date\" className=\"form-control floating\" value={this.state.aptDate1} onChange={e => this.handleDate(e.target.value)} />\r\n                  </div>\r\n\r\n\r\n                  <div className=\"col-xl-1\">\r\n\r\n                    <button type=\"submit\" className=\"btn btn-success btn-block\" >Search</button>\r\n                  </div>\r\n                </div>\r\n              </form>\r\n              <table className=\"table table-border table-striped custom-table datatable mb-0\">\r\n                <thead>\r\n                  <tr>\r\n                    <th className=\"ant-table-cell\">Appointment ID</th>\r\n                    <th className=\"ant-table-cell\">Customer Name</th>\r\n                    <th className=\"ant-table-cell\">Appointment Date</th>\r\n                    <th className=\"ant-table-cell\">Appointment Time</th>\r\n                    <th className=\"ant-table-cell\">Contact Number</th>\r\n                    <th className=\"ant-table-cell\">Remark</th>\r\n                    <th className=\"ant-table-cell\">Status</th>\r\n                    <th className=\"ant-table-cell\">Register</th>\r\n                 <th className=\"ant-table-cell\">Action</th>\r\n\r\n                  </tr>\r\n                </thead>\r\n\r\n\r\n                {this.state.responseToPost.length > 0 && (\r\n                  <tbody>\r\n\r\n                    {this.state.responseToPost.map((items) => (\r\n\r\n\r\n                      <tr key={items.appointment_id}>\r\n                        <td>{items.appointment_id}</td>\r\n                        <td>{`${items.patient_details.patient_first_name} ${items.patient_details.patient_last_name}`}</td>\r\n                        <td>{items.appointment_date}</td>\r\n                        <td>{items.appointment_time}</td>\r\n                        <td>{items.patient_details.patient_contact_no}</td>\r\n                        <td>{items.patient_details.patient_appointment_remarks}</td>\r\n                        <td className=\"text-warning\">{items.appointment_status}</td>\r\n                        <td>\r\n                          <button className=\"btn btn btn-primary float-right\" onClick={() => this.handleName(items)}><i\r\n                            className=\"fa fa-plus\" ></i> Register Customer</button>\r\n\r\n                        </td>\r\n\r\n                        <td className=\"text-right\">\r\n                          <div className=\"dropdown dropdown-action\">\r\n                            <a className=\"action-icon dropdown-toggle\" data-toggle=\"dropdown\"\r\n                              aria-expanded=\"false\"><i className=\"fa fa-ellipsis-v\"></i></a>\r\n                            <div className=\"dropdown-menu dropdown-menu-right\">\r\n                              <Link to={\"/appointmentUpdate/\" + items.appointment_id} className=\"dropdown-item\"><i\r\n                                className=\"fa fa-pencil m-r-5\"></i> Edit</Link>\r\n                              <button className=\"dropdown-item\" data-toggle=\"modal\"\r\n                                data-target=\"#delete_patient\" onClick={() => this.CancelStatus(items.appointment_id)}><i className=\"fa fa-trash-o m-r-5\"></i> Cancel</button>\r\n                            </div>\r\n                          </div>\r\n                        </td>\r\n                      </tr>\r\n\r\n\r\n                    ))}</tbody>\r\n                )}\r\n              </table>\r\n\r\n\r\n\r\n\r\n\r\n\r\n            </div>\r\n          </div>\r\n\r\n\r\n          <div className=\"sidebar-overlay\" data-reff=\"\"></div>\r\n        </div>\r\n\r\n      );\r\n    }\r\n  }\r\n}\r\nexport default AppointmentSearch;\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n"]},"metadata":{},"sourceType":"module"}